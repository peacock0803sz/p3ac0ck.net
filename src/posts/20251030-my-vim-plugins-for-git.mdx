---
slug: 20251029-my-vim-plugins-for-git
title: Gitã‚’å¿«é©ã«Vim/Neovimã‹ã‚‰æ“ä½œã™ã‚‹ãŸã‚ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³(ã¨è¨­å®š)
lang: ja
emoji: "ğŸ› "
pubDate: 2025-10-30
---

ã“ã®è¨˜äº‹ã¯ [Vimé§…ä¼](https://vim-jp.org/ekiden) ã® [2025-10-29](https://vim-jp.org/ekiden#article-2025-10-29) ã®è¨˜äº‹ã§ã™ã€‚

## å¯¾è±¡èª­è€…ãƒ»ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³

* æ™®æ®µVim/Neovim (ä»¥ä¸‹ã€å˜ã«Vimã¨è¡¨è¨˜)ã‚’ä½¿ã£ã¦ã„ã‚‹
* Denopsãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ä½¿ã†ã“ã¨ã«æŠµæŠ—ãŒãªã„
* Vimã‹ã‚‰Gitã‚’å¿«é©ã«æ“ä½œã—ãŸã„
    * git status / git add / git commit / git log

## ãŠã“ã¨ã‚ã‚Š

è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ä¾‹ã‚’ç°¡ç•¥ã«ã™ã‚‹ãŸã‚ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå½¢ã§è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ä¾‹ã‚„æ‰‹é †ã®ä¾‹ç¤ºã‚’è¨˜è¼‰ã—ã¦ã„ã¾ã™ã€‚å¿…è¦ã«å¿œã˜ã¦èª­ã¿æ›¿ãˆã¦ãã ã•ã„ã€‚

* ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã¨ã—ã¦ [`tani/vim-jetpack`](https://github.com/tani/vim-jetpack) ã‚’ä½¿ç”¨
* è¨­å®šã¯Vim9 script / Luaã‚’ä½¿ç”¨ã›ãšã€å˜ç´”ã«1æšã® `.vimrc` ã«åã¾ã‚‹ã‚ˆã†ãªè¨˜è¿°

## ãƒ‡ãƒ¢ (å®Œæˆå›³)

<video controls muted autoplay transition:persist>
  <source src="https://media.cleanshot.cloud/media/16481/bbI5cvwqQtUvDl87NtmdwjJOVmPp6EtXKumsrHVO.mp4?Expires=1761816486&Signature=oyCv-1Lm0sh4CCSeLDAygWi1eHyplw2Zh2JTJc6ZR9BxnO802Qdt935amKHYq1LMt1yPZAtgHtuFemnE~7f9Wl3wzUtmcUaGDso6pqlD6-K~jODnutNlHMZwB3Bwe-COZxFLWobIXVu-Vr2TYb3KZrXjW-omEAO4O3NoZtstsOxmV3gtPwKi1uY4-K8bGK-qRR6KsBO43a0CDU8I44SZAgSIwEzTpgSAkBYJFRWzS7tTVOPvMXzRd5Av0NawlG90Fic4wiLNxXX1wo7vQWabnE~qsDuQDkUOnZZD10OxOSu1vuy66RWCGWOncj7exX4q74-ebr93sM0pGeY4QX8TsQ__&Key-Pair-Id=K269JMAT9ZF4GZ" type="video/mp4" />
</video>

## è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®å…¨ä½“

```vim
set nocompatible

" Plugin List {{{
packadd vim-jetpack
call jetpack#begin()
Jetpack 'https://github.com/tani/vim-jetpack'
Jetpack 'https://github.com/vim-denops/denops.vim'
Jetpack 'https://github.com/Shougo/ddu.vim'
Jetpack 'https://github.com/Shougo/ddu-ui-ff'
Jetpack 'https://github.com/Shougo/ddu-filter-matcher_substring'
Jetpack 'https://github.com/kuuote/ddu-source-git_status'
Jetpack 'https://github.com/kyoh86/ddu-source-git_log'
Jetpack 'https://github.com/lambdalisue/vim-gin'
Jetpack 'https://github.com/lambdalisue/vim-guise'
Jetpack 'https://github.com/rhysd/committia.vim'
call jetpack#end()
" }}}

" ddu.vim Global Configration {{{
call ddu#custom#patch_global(#{
  \ ui: 'ff',
  \ uiParams: #{
    \ ff: #{
      \ diplayTree: v:true,        
      \ split: 'tab',
      \ prompt: '>',
      \ floatingBorder: 'single',
      \ autoAction: #{ name: 'preview', delay: 1 },
      \ startAutoAction: v:true,
      \ previewFloatingBorder: 'single',
      \ previewSplit: 'vertical',
    \ },
  \ },
  \ sourceOptions: #{
    \ _: #{
      \ ignoreCase: v:true,
      \ matchers: ["matcher_substring"],
      \ sorters: ["matcher_substring"],
    \ },
  \ },
  \ kindOptions: #{ _: #{ defaultAction: 'open' } },
\ })
" }}}

" ddu.vim Keybinds {{{
let g:mapleader = ' '

" ddu-sources mappings {{{
nnoremap <Leader>gs <Cmd>call ddu#start(#{ name: 'git_status', sources: [#{ name: 'git_status' }], resume: v:true })<CR>
nnoremap <Leader>gl <Cmd>call ddu#start(#{ name: 'git_log', sources: [#{ name: 'git_log' }], resume: v:true })<CR>
" }}}

" ddu-ui-ff mappings {{{
function! s:ddu_ui_ff_mappings() abort
  nnoremap <C-o> <NOP>
  nnoremap <C-j> <NOP>
  nnoremap m <NOP>
  nnoremap t <NOP>

  nnoremap <CR> <Cmd>call ddu#ui#do_action('itemAction')<CR>
  nnoremap / <Cmd>call ddu#ui#do_action('openFilterWindow')<CR>
  nnoremap + <Cmd>call ddu#ui#do_action('chooseAction')<CR>
  nnoremap l <Cmd>call ddu#ui#do_action('expandItem')<CR>
  nnoremap h <Cmd>call ddu#ui#do_action('collapseItem')<CR>
  nnoremap q <Cmd>call ddu#ui#do_action('quit')<CR>

  nnoremap <Tab> <Cmd>call ddu#ui#do_action('toggleSelectItem')<CR>
  nnoremap <C-r> <Cmd>call ddu#ui#do_action('redraw', #{ method: 'refreshItems' })<CR>
  nnoremap <C-x> <Cmd>call ddu#ui#do_action('itemAction', #{ name: 'open', params: #{ command: 'split' } })<CR>
  nnoremap <C-v> <Cmd>call ddu#ui#do_action('itemAction', #{ name: 'open', params: #{ command: 'vsplit' } })<CR>
  nnoremap <C-t> <Cmd>call ddu#ui#do_action('itemAction', #{ name: 'open', params: #{ command: 'tabedit' } })<CR>

  if b:ddu_ui_name ==# 'git_status'
    nnoremap a <Cmd>call ddu#ui#do_action('itemAction', #{ name: 'add' })<CR>
    nnoremap r <Cmd>call ddu#ui#do_action('itemAction', #{ name: 'reset' })<CR>
    nnoremap R <Cmd>call ddu#ui#do_action('itemAction', #{ name: 'restore' })<CR>
  endif
endfunction

augroup DduUiFf
  autocmd!
  autocmd FileType ddu-ff call s:ddu_ui_ff_mappings()
augroup END
" }}}
" }}}

nnoremap <Leader>gc <Cmd>Gin commit<CR>
let g:committia_open_only_vim_starting = 0
```

## å„ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®è§£èª¬

ã“ã®è¨˜äº‹ã§ã¯ä»¥ä¸‹ã®3ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä¸­å¿ƒã«ç´¹ä»‹ã—ã¦ã„ãã¾ã™ã€‚

* [`Shougo/ddu.vim`](https://github.com/Shougo/ddu.vim) (+ é–¢é€£ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ç¾¤)
* [`lambdalisue/vim-gin`](https://github.com/lambdalisue/vim-gin)
* [`rhysd/committia.vim`](https://github.com/rhysd/committia.vim) (+ [`lambdalisue/vim-guise`](https://github.com/lambdalisue/vim-guise))

### ddu.vim

å®Ÿè³ªã©ã‚“ãªã‚‚ã®ã§ã‚‚æ“ä½œã§ãã¦ã—ã¾ã†Fuzzy Finderã§ã™ã€‚
Shougoã•ã‚“ä½œã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãªã®ã§è‰²ã€…ã¨å°å…¥ã®ãƒãƒ¼ãƒ‰ãƒ«ã¯é«˜ã„ã§ã™ãŒã€ã‚ã‚‹ç¨‹åº¦ã¾ã§å°å…¥ã—ã¦ã—ã¾ãˆã°(å®Œç’§ã«è¨­å®šã§ããšã¨ã‚‚)ä¾¿åˆ©ã«ãªã‚Šã¾ã™ã€‚

ä»Šå›ã¯Gitæ“ä½œã ã‘ã«ç›®çš„ã‚’è¨­å®šã—ã€ä»¥ä¸‹ã®é–¢é€£ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ã¿ã‚’å°å…¥ã™ã‚Œã°å‹•ãã‚ˆã†ãªè¨­å®šã‚’è¨˜è¼‰ã—ã¦ã„ã¾ã™ã€‚

* [`Shougo/ddu-ui-ff`](https://github.com/Shougo/ddu-ui-ff)
* [`Shougo/ddu-filter-matcher_substring`](https://github.com/Shougo/ddu-filter-matcher_substring)
* [`kuuote/ddu-source-git_status`](https://github.com/kuuote/ddu-source-git_status)
* [`kyoh86/ddu-source-git_log`](https://github.com/kyoh86/ddu-source-git_log)

ddu-source-git_statusã§git statusã¨stage/unstageãªã©ã®æ“ä½œã‚’ã€ddu-source-git_logã§commit logã®è¡¨ç¤ºãŒã§ãã¾ã™ã€‚

###  vim-gin & committia.vim (\+ vim-guise)

Git commitã‚’åŒã˜vimã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‹ã‚‰å®Ÿè¡Œã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã—ã¾ã™ã€‚
`rhysd/committia.vim` ã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å…¥åŠ›ã®ç”»é¢ã‚’ãƒªãƒƒãƒã«è¦‹ã‚„ã™ãã—ã¦ã„ã¾ã™ã€‚

ã“ã‚Œã‚‰ã¯ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’å°å…¥ã™ã‚Œã°ã€ä»¥ä¸‹ã®2è¡Œã ã‘ã§ä½¿ãˆã¾ã™ã€‚

```vim
nnoremap <Leader>gc <Cmd>Gin commit<CR>
let g:committia_open_only_vim_starting = 0
```

## Appendix (ãŠã¾ã‘)

Ginã§instant fixupã‚’å®Ÿè£…ã™ã‚‹æ–¹æ³•ãŒatusyã•ã‚“ã®è¨˜äº‹[ã€Œgin.vimã§æ—ã‚‹gitã®ãƒ­ã‚°æ”¹ç«„ (instant fixup)ã€](https://blog.atusy.net/2024/03/15/instant-fixup-with-gin-vim/)ã§ç´¹ä»‹ã•ã‚Œã¦ã„ã¾ã™ã€‚
amend commitã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ä¿®æ­£ã‚’ã—ãŸã‚Šã€fixup commitã‚’ç©ã‚“ã§intractive rebaseã§ã¾ã¨ã‚ã‚‹ã“ã¨ãŒç°¡å˜ã«ã§ãã¾ã™ã€‚
